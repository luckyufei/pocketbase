# PocketBase Python SDK - å¼€å‘è®¡åˆ’

> **é¡¹ç›®ä»£å·**: PyPocket
> **å¼€å‘æ¨¡å¼**: TDD (æµ‹è¯•é©±åŠ¨å¼€å‘)
> **é¢„è®¡æ€»å·¥æ—¶**: ~160h

---

## æ‰§è¡ŒåŸåˆ™

### TDD çº¢ç»¿é‡æ„å¾ªç¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”´ Red: ç¼–å†™å¤±è´¥çš„æµ‹è¯•                                          â”‚
â”‚  â”œâ”€â”€ å®šä¹‰æœŸæœ›è¡Œä¸º                                                â”‚
â”‚  â”œâ”€â”€ ç¼–å†™æµ‹è¯•ç”¨ä¾‹                                                â”‚
â”‚  â””â”€â”€ è¿è¡Œæµ‹è¯• â†’ ç¡®è®¤å¤±è´¥                                         â”‚
â”‚                                                                 â”‚
â”‚  ğŸŸ¢ Green: ç¼–å†™æœ€å°å®ç°                                          â”‚
â”‚  â”œâ”€â”€ åªå†™èƒ½è®©æµ‹è¯•é€šè¿‡çš„ä»£ç                                        â”‚
â”‚  â””â”€â”€ è¿è¡Œæµ‹è¯• â†’ ç¡®è®¤é€šè¿‡                                         â”‚
â”‚                                                                 â”‚
â”‚  ğŸ”µ Refactor: é‡æ„ä¼˜åŒ–                                           â”‚
â”‚  â”œâ”€â”€ æ¶ˆé™¤é‡å¤                                                    â”‚
â”‚  â”œâ”€â”€ æ”¹å–„å‘½å                                                    â”‚
â”‚  â””â”€â”€ è¿è¡Œæµ‹è¯• â†’ ä¿æŒé€šè¿‡                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¼€å‘æµç¨‹

1. **æ¯ä¸ª Task å¼€å§‹å‰**ï¼šå…ˆé˜…è¯» jssdk å¯¹åº”æºç 
2. **æµ‹è¯•å…ˆè¡Œ**ï¼šå…ˆå†™ `test_*.py`ï¼Œå†å†™å®ç°
3. **å°æ­¥è¿­ä»£**ï¼šæ¯æ¬¡åªå®ç°ä¸€ä¸ªå°åŠŸèƒ½ç‚¹
4. **æŒç»­éªŒè¯**ï¼šæ¯æ¬¡ä¿®æ”¹åè¿è¡Œæµ‹è¯•
5. **ç±»å‹å®‰å…¨**ï¼šæ¯æ¬¡æäº¤å‰è¿è¡Œ mypy

---

## Phase 1: é¡¹ç›®åŸºç¡€è®¾æ–½ (P0-Critical)

> é¢„è®¡å·¥æ—¶: 12h
> ç›®æ ‡: é¡¹ç›®éª¨æ¶ã€CI/CDã€å¼€å‘ç¯å¢ƒ

### Sprint 1.1: é¡¹ç›®åˆå§‹åŒ–

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-1.1.1 | åˆ›å»º `pythonsdk/` ç›®å½•ç»“æ„ | 1h | â¬œ |
| T-1.1.2 | é…ç½® `pyproject.toml` (Poetry) | 1h | â¬œ |
| T-1.1.3 | é…ç½® `ruff.toml` (Lint + Format) | 0.5h | â¬œ |
| T-1.1.4 | é…ç½® `mypy.ini` (ä¸¥æ ¼ç±»å‹æ£€æŸ¥) | 0.5h | â¬œ |
| T-1.1.5 | é…ç½® `pytest.ini` + `conftest.py` | 1h | â¬œ |
| T-1.1.6 | é…ç½® `.pre-commit-config.yaml` | 0.5h | â¬œ |
| T-1.1.7 | ç¼–å†™ `README.md` | 1h | â¬œ |

### Sprint 1.2: CI/CD é…ç½®

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-1.2.1 | é…ç½® GitHub Actions æµ‹è¯•æµæ°´çº¿ | 2h | â¬œ |
| T-1.2.2 | é…ç½®è¦†ç›–ç‡æŠ¥å‘Š (codecov) | 1h | â¬œ |
| T-1.2.3 | é…ç½® PyPI å‘å¸ƒæµæ°´çº¿ | 2h | â¬œ |
| T-1.2.4 | é…ç½®å¤š Python ç‰ˆæœ¬æµ‹è¯•çŸ©é˜µ (3.10, 3.11, 3.12) | 1h | â¬œ |

---

## Phase 2: æ ¸å¿ƒåŸºç¡€æ¨¡å— (P0)

> é¢„è®¡å·¥æ—¶: 28h
> ç›®æ ‡: Clientã€AuthStoreã€Errorã€Models

### Sprint 2.1: æ•°æ®æ¨¡å‹

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-2.1.1 | ğŸ”´ ç¼–å†™ `RecordModel` æµ‹è¯• | 1h | â¬œ |
| T-2.1.2 | ğŸŸ¢ å®ç° `RecordModel` (Pydantic BaseModel) | 1h | â¬œ |
| T-2.1.3 | ğŸ”´ ç¼–å†™ `ListResult[T]` æµ‹è¯• | 1h | â¬œ |
| T-2.1.4 | ğŸŸ¢ å®ç° `ListResult[T]` æ³›å‹æ¨¡å‹ | 1h | â¬œ |
| T-2.1.5 | ğŸ”´ ç¼–å†™ `CollectionModel` æµ‹è¯• | 0.5h | â¬œ |
| T-2.1.6 | ğŸŸ¢ å®ç° `CollectionModel` | 0.5h | â¬œ |
| T-2.1.7 | ğŸ”´ ç¼–å†™ Auth ç›¸å…³æ¨¡å‹æµ‹è¯• | 0.5h | â¬œ |
| T-2.1.8 | ğŸŸ¢ å®ç° `AuthMethodsList`, `AuthProviderInfo` ç­‰ | 0.5h | â¬œ |

### Sprint 2.2: ClientResponseError

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-2.2.1 | ğŸ”´ ç¼–å†™ `ClientResponseError` åŸºç¡€æµ‹è¯• | 1h | â¬œ |
| T-2.2.2 | ğŸŸ¢ å®ç° `ClientResponseError` å¼‚å¸¸ç±» | 1h | â¬œ |
| T-2.2.3 | ğŸ”´ ç¼–å†™é”™è¯¯å“åº”è§£ææµ‹è¯• | 0.5h | â¬œ |
| T-2.2.4 | ğŸŸ¢ å®ç°é”™è¯¯å“åº”æ ‡å‡†åŒ–å¤„ç† | 0.5h | â¬œ |
| T-2.2.5 | ğŸ”´ ç¼–å†™ `to_dict()` / JSON åºåˆ—åŒ–æµ‹è¯• | 0.5h | â¬œ |
| T-2.2.6 | ğŸŸ¢ å®ç°åºåˆ—åŒ–æ–¹æ³• | 0.5h | â¬œ |

### Sprint 2.3: å·¥å…·å‡½æ•°

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-2.3.1 | ğŸ”´ ç¼–å†™ JWT è§£ææµ‹è¯• (`get_token_payload`, `is_token_expired`) | 1h | â¬œ |
| T-2.3.2 | ğŸŸ¢ å®ç° JWT å·¥å…·å‡½æ•° | 1h | â¬œ |
| T-2.3.3 | ğŸ”´ ç¼–å†™ `filter()` å‚æ•°ç»‘å®šæµ‹è¯• | 1h | â¬œ |
| T-2.3.4 | ğŸŸ¢ å®ç° `filter()` å‡½æ•°ï¼ˆå­—ç¬¦ä¸²è½¬ä¹‰ã€æ—¥æœŸæ ¼å¼åŒ–ï¼‰ | 1.5h | â¬œ |
| T-2.3.5 | ğŸ”´ ç¼–å†™ `SendOptions` æµ‹è¯• | 0.5h | â¬œ |
| T-2.3.6 | ğŸŸ¢ å®ç° `SendOptions` TypedDict | 0.5h | â¬œ |

### Sprint 2.4: AuthStore

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-2.4.1 | ğŸ”´ ç¼–å†™ `BaseAuthStore` æµ‹è¯• (token, record, is_valid, is_superuser) | 1.5h | â¬œ |
| T-2.4.2 | ğŸŸ¢ å®ç° `BaseAuthStore` | 2h | â¬œ |
| T-2.4.3 | ğŸ”´ ç¼–å†™ `on_change` å›è°ƒæµ‹è¯• | 0.5h | â¬œ |
| T-2.4.4 | ğŸŸ¢ å®ç° `on_change` è®¢é˜…æœºåˆ¶ | 0.5h | â¬œ |
| T-2.4.5 | ğŸ”´ ç¼–å†™ Cookie å¯¼å…¥/å¯¼å‡ºæµ‹è¯• | 1h | â¬œ |
| T-2.4.6 | ğŸŸ¢ å®ç° `load_from_cookie`, `export_to_cookie` | 1h | â¬œ |
| T-2.4.7 | ğŸ”´ ç¼–å†™ `FileAuthStore` æµ‹è¯• | 1h | â¬œ |
| T-2.4.8 | ğŸŸ¢ å®ç° `FileAuthStore` | 1h | â¬œ |

### Sprint 2.5: Client æ ¸å¿ƒ

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-2.5.1 | ğŸ”´ ç¼–å†™ Client åˆå§‹åŒ–æµ‹è¯• | 0.5h | â¬œ |
| T-2.5.2 | ğŸŸ¢ å®ç° `PocketBase.__init__` | 0.5h | â¬œ |
| T-2.5.3 | ğŸ”´ ç¼–å†™ `build_url()` æµ‹è¯• | 0.5h | â¬œ |
| T-2.5.4 | ğŸŸ¢ å®ç° `build_url()` | 0.5h | â¬œ |
| T-2.5.5 | ğŸ”´ ç¼–å†™ `send()` æµ‹è¯• (GET/POST/PATCH/DELETE) | 2h | â¬œ |
| T-2.5.6 | ğŸŸ¢ å®ç° `send()` æ–¹æ³•ï¼ˆhttpx é›†æˆï¼‰ | 2h | â¬œ |
| T-2.5.7 | ğŸ”´ ç¼–å†™è¯·æ±‚å¤´è‡ªåŠ¨æ³¨å…¥æµ‹è¯• (Authorization, Accept-Language) | 0.5h | â¬œ |
| T-2.5.8 | ğŸŸ¢ å®ç°è¯·æ±‚å¤´è‡ªåŠ¨æ³¨å…¥ | 0.5h | â¬œ |
| T-2.5.9 | ğŸ”´ ç¼–å†™ `before_send` / `after_send` é’©å­æµ‹è¯• | 1h | â¬œ |
| T-2.5.10 | ğŸŸ¢ å®ç°é’©å­æœºåˆ¶ | 1h | â¬œ |

---

## Phase 3: CRUD æœåŠ¡å±‚ (P0)

> é¢„è®¡å·¥æ—¶: 24h
> ç›®æ ‡: RecordServiceã€CollectionService å®Œæ•´ CRUD

### Sprint 3.1: BaseService & CrudService

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-3.1.1 | ğŸ”´ ç¼–å†™ `BaseService` æµ‹è¯• | 0.5h | â¬œ |
| T-3.1.2 | ğŸŸ¢ å®ç° `BaseService` åŸºç±» | 0.5h | â¬œ |
| T-3.1.3 | ğŸ”´ ç¼–å†™ `CrudService.get_list()` æµ‹è¯• | 1h | â¬œ |
| T-3.1.4 | ğŸŸ¢ å®ç° `get_list()` | 1h | â¬œ |
| T-3.1.5 | ğŸ”´ ç¼–å†™ `CrudService.get_full_list()` æµ‹è¯• | 1h | â¬œ |
| T-3.1.6 | ğŸŸ¢ å®ç° `get_full_list()` (æ‰¹é‡è·å–) | 1h | â¬œ |
| T-3.1.7 | ğŸ”´ ç¼–å†™ `CrudService.get_first_list_item()` æµ‹è¯• | 0.5h | â¬œ |
| T-3.1.8 | ğŸŸ¢ å®ç° `get_first_list_item()` | 0.5h | â¬œ |
| T-3.1.9 | ğŸ”´ ç¼–å†™ `CrudService.get_one()` æµ‹è¯• | 0.5h | â¬œ |
| T-3.1.10 | ğŸŸ¢ å®ç° `get_one()` | 0.5h | â¬œ |
| T-3.1.11 | ğŸ”´ ç¼–å†™ `CrudService.create()` æµ‹è¯• | 0.5h | â¬œ |
| T-3.1.12 | ğŸŸ¢ å®ç° `create()` | 0.5h | â¬œ |
| T-3.1.13 | ğŸ”´ ç¼–å†™ `CrudService.update()` æµ‹è¯• | 0.5h | â¬œ |
| T-3.1.14 | ğŸŸ¢ å®ç° `update()` | 0.5h | â¬œ |
| T-3.1.15 | ğŸ”´ ç¼–å†™ `CrudService.delete()` æµ‹è¯• | 0.5h | â¬œ |
| T-3.1.16 | ğŸŸ¢ å®ç° `delete()` | 0.5h | â¬œ |

### Sprint 3.2: RecordService åŸºç¡€

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-3.2.1 | ğŸ”´ ç¼–å†™ `RecordService` åˆå§‹åŒ–æµ‹è¯• | 0.5h | â¬œ |
| T-3.2.2 | ğŸŸ¢ å®ç° `RecordService` + `pb.collection()` | 1h | â¬œ |
| T-3.2.3 | ğŸ”´ ç¼–å†™ CRUD ç»§æ‰¿æµ‹è¯• (ç¡®ä¿æ­£ç¡®ç»§æ‰¿ CrudService) | 0.5h | â¬œ |
| T-3.2.4 | ğŸŸ¢ éªŒè¯ç»§æ‰¿å…³ç³»ï¼Œå¿…è¦æ—¶é‡å†™æ–¹æ³• | 0.5h | â¬œ |
| T-3.2.5 | ğŸ”´ ç¼–å†™ `update()` è‡ªåŠ¨æ›´æ–° AuthStore æµ‹è¯• | 0.5h | â¬œ |
| T-3.2.6 | ğŸŸ¢ å®ç° `update()` AuthStore è”åŠ¨ | 0.5h | â¬œ |
| T-3.2.7 | ğŸ”´ ç¼–å†™ `delete()` è‡ªåŠ¨æ¸…é™¤ AuthStore æµ‹è¯• | 0.5h | â¬œ |
| T-3.2.8 | ğŸŸ¢ å®ç° `delete()` AuthStore è”åŠ¨ | 0.5h | â¬œ |

### Sprint 3.3: CollectionService

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-3.3.1 | ğŸ”´ ç¼–å†™ `CollectionService` CRUD æµ‹è¯• | 1h | â¬œ |
| T-3.3.2 | ğŸŸ¢ å®ç° `CollectionService` (ç»§æ‰¿ CrudService) | 1h | â¬œ |
| T-3.3.3 | ğŸ”´ ç¼–å†™ `truncate()` æµ‹è¯• | 0.5h | â¬œ |
| T-3.3.4 | ğŸŸ¢ å®ç° `truncate()` | 0.5h | â¬œ |
| T-3.3.5 | ğŸ”´ ç¼–å†™ `import_collections()` æµ‹è¯• | 0.5h | â¬œ |
| T-3.3.6 | ğŸŸ¢ å®ç° `import_collections()` | 0.5h | â¬œ |
| T-3.3.7 | ğŸ”´ ç¼–å†™ `get_scaffolds()` æµ‹è¯• | 0.5h | â¬œ |
| T-3.3.8 | ğŸŸ¢ å®ç° `get_scaffolds()` | 0.5h | â¬œ |

### Sprint 3.4: è¯·æ±‚å–æ¶ˆæœºåˆ¶

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-3.4.1 | ğŸ”´ ç¼–å†™è‡ªåŠ¨å–æ¶ˆé‡å¤è¯·æ±‚æµ‹è¯• | 1h | â¬œ |
| T-3.4.2 | ğŸŸ¢ å®ç° `auto_cancellation()` | 1h | â¬œ |
| T-3.4.3 | ğŸ”´ ç¼–å†™ `cancel_request()` æµ‹è¯• | 0.5h | â¬œ |
| T-3.4.4 | ğŸŸ¢ å®ç° `cancel_request()` | 0.5h | â¬œ |
| T-3.4.5 | ğŸ”´ ç¼–å†™ `cancel_all_requests()` æµ‹è¯• | 0.5h | â¬œ |
| T-3.4.6 | ğŸŸ¢ å®ç° `cancel_all_requests()` | 0.5h | â¬œ |
| T-3.4.7 | ğŸ”´ ç¼–å†™ `request_key` è‡ªå®šä¹‰æµ‹è¯• | 0.5h | â¬œ |
| T-3.4.8 | ğŸŸ¢ å®ç° `request_key` å‚æ•°æ”¯æŒ | 0.5h | â¬œ |

---

## Phase 4: è®¤è¯æ¨¡å— (P1)

> é¢„è®¡å·¥æ—¶: 28h
> ç›®æ ‡: å®Œæ•´è®¤è¯æµç¨‹

### Sprint 4.1: å¯†ç è®¤è¯

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-4.1.1 | ğŸ”´ ç¼–å†™ `auth_with_password()` æˆåŠŸæµ‹è¯• | 1h | â¬œ |
| T-4.1.2 | ğŸŸ¢ å®ç° `auth_with_password()` | 1.5h | â¬œ |
| T-4.1.3 | ğŸ”´ ç¼–å†™è®¤è¯å¤±è´¥æµ‹è¯• (401, 400) | 0.5h | â¬œ |
| T-4.1.4 | ğŸŸ¢ å®ç°é”™è¯¯å¤„ç† | 0.5h | â¬œ |
| T-4.1.5 | ğŸ”´ ç¼–å†™ AuthStore è‡ªåŠ¨æ›´æ–°æµ‹è¯• | 0.5h | â¬œ |
| T-4.1.6 | ğŸŸ¢ å®ç° `auth_response()` è¾…åŠ©æ–¹æ³• | 0.5h | â¬œ |

### Sprint 4.2: è®¤è¯åˆ·æ–°

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-4.2.1 | ğŸ”´ ç¼–å†™ `auth_refresh()` æµ‹è¯• | 1h | â¬œ |
| T-4.2.2 | ğŸŸ¢ å®ç° `auth_refresh()` | 1h | â¬œ |
| T-4.2.3 | ğŸ”´ ç¼–å†™è‡ªåŠ¨åˆ·æ–°æœºåˆ¶æµ‹è¯• | 1h | â¬œ |
| T-4.2.4 | ğŸŸ¢ å®ç°è‡ªåŠ¨åˆ·æ–° (auto_refresh_threshold) | 1.5h | â¬œ |

### Sprint 4.3: è®¤è¯æ–¹æ³•æŸ¥è¯¢

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-4.3.1 | ğŸ”´ ç¼–å†™ `list_auth_methods()` æµ‹è¯• | 0.5h | â¬œ |
| T-4.3.2 | ğŸŸ¢ å®ç° `list_auth_methods()` | 0.5h | â¬œ |

### Sprint 4.4: OTP è®¤è¯

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-4.4.1 | ğŸ”´ ç¼–å†™ `request_otp()` æµ‹è¯• | 0.5h | â¬œ |
| T-4.4.2 | ğŸŸ¢ å®ç° `request_otp()` | 0.5h | â¬œ |
| T-4.4.3 | ğŸ”´ ç¼–å†™ `auth_with_otp()` æµ‹è¯• | 0.5h | â¬œ |
| T-4.4.4 | ğŸŸ¢ å®ç° `auth_with_otp()` | 0.5h | â¬œ |

### Sprint 4.5: OAuth2 è®¤è¯

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-4.5.1 | ğŸ”´ ç¼–å†™ `auth_with_oauth2_code()` æµ‹è¯• | 1h | â¬œ |
| T-4.5.2 | ğŸŸ¢ å®ç° `auth_with_oauth2_code()` | 1.5h | â¬œ |
| T-4.5.3 | ğŸ”´ ç¼–å†™ `auth_with_oauth2()` (realtime) æµ‹è¯• | 1.5h | â¬œ |
| T-4.5.4 | ğŸŸ¢ å®ç° `auth_with_oauth2()` (éœ€è¦ SSE) | 2h | â¬œ |

### Sprint 4.6: å¯†ç é‡ç½®

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-4.6.1 | ğŸ”´ ç¼–å†™ `request_password_reset()` æµ‹è¯• | 0.5h | â¬œ |
| T-4.6.2 | ğŸŸ¢ å®ç° `request_password_reset()` | 0.5h | â¬œ |
| T-4.6.3 | ğŸ”´ ç¼–å†™ `confirm_password_reset()` æµ‹è¯• | 0.5h | â¬œ |
| T-4.6.4 | ğŸŸ¢ å®ç° `confirm_password_reset()` | 0.5h | â¬œ |

### Sprint 4.7: é‚®ç®±éªŒè¯

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-4.7.1 | ğŸ”´ ç¼–å†™ `request_verification()` æµ‹è¯• | 0.5h | â¬œ |
| T-4.7.2 | ğŸŸ¢ å®ç° `request_verification()` | 0.5h | â¬œ |
| T-4.7.3 | ğŸ”´ ç¼–å†™ `confirm_verification()` æµ‹è¯• | 0.5h | â¬œ |
| T-4.7.4 | ğŸŸ¢ å®ç° `confirm_verification()` | 0.5h | â¬œ |

### Sprint 4.8: é‚®ç®±å˜æ›´

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-4.8.1 | ğŸ”´ ç¼–å†™ `request_email_change()` æµ‹è¯• | 0.5h | â¬œ |
| T-4.8.2 | ğŸŸ¢ å®ç° `request_email_change()` | 0.5h | â¬œ |
| T-4.8.3 | ğŸ”´ ç¼–å†™ `confirm_email_change()` æµ‹è¯• | 0.5h | â¬œ |
| T-4.8.4 | ğŸŸ¢ å®ç° `confirm_email_change()` | 0.5h | â¬œ |

### Sprint 4.9: ç”¨æˆ·æ¨¡æ‹Ÿ

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-4.9.1 | ğŸ”´ ç¼–å†™ `impersonate()` æµ‹è¯• | 1h | â¬œ |
| T-4.9.2 | ğŸŸ¢ å®ç° `impersonate()` (è¿”å›æ–° Client å®ä¾‹) | 1h | â¬œ |

---

## Phase 5: å®æ—¶è®¢é˜… (P1)

> é¢„è®¡å·¥æ—¶: 20h
> ç›®æ ‡: SSE å®æ—¶è®¢é˜…

### Sprint 5.1: RealtimeService åŸºç¡€

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-5.1.1 | ğŸ”´ ç¼–å†™ SSE è¿æ¥æµ‹è¯• | 1h | â¬œ |
| T-5.1.2 | ğŸŸ¢ å®ç° SSE è¿æ¥ (httpx-sse) | 2h | â¬œ |
| T-5.1.3 | ğŸ”´ ç¼–å†™æ¶ˆæ¯è§£ææµ‹è¯• | 1h | â¬œ |
| T-5.1.4 | ğŸŸ¢ å®ç°æ¶ˆæ¯è§£æ | 1h | â¬œ |
| T-5.1.5 | ğŸ”´ ç¼–å†™æ–­çº¿é‡è¿æµ‹è¯• | 1h | â¬œ |
| T-5.1.6 | ğŸŸ¢ å®ç°æ–­çº¿è‡ªåŠ¨é‡è¿ | 2h | â¬œ |

### Sprint 5.2: è®¢é˜…ç®¡ç†

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-5.2.1 | ğŸ”´ ç¼–å†™ `subscribe()` æµ‹è¯• | 1h | â¬œ |
| T-5.2.2 | ğŸŸ¢ å®ç° `subscribe()` | 1.5h | â¬œ |
| T-5.2.3 | ğŸ”´ ç¼–å†™ `unsubscribe()` æµ‹è¯• | 0.5h | â¬œ |
| T-5.2.4 | ğŸŸ¢ å®ç° `unsubscribe()` | 0.5h | â¬œ |
| T-5.2.5 | ğŸ”´ ç¼–å†™ `unsubscribe_by_prefix()` æµ‹è¯• | 0.5h | â¬œ |
| T-5.2.6 | ğŸŸ¢ å®ç° `unsubscribe_by_prefix()` | 0.5h | â¬œ |

### Sprint 5.3: RecordService å®æ—¶

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-5.3.1 | ğŸ”´ ç¼–å†™ Record `subscribe()` æµ‹è¯• | 1h | â¬œ |
| T-5.3.2 | ğŸŸ¢ å®ç° Record `subscribe()` (å§”æ‰˜ç»™ RealtimeService) | 1h | â¬œ |
| T-5.3.3 | ğŸ”´ ç¼–å†™ Record `unsubscribe()` æµ‹è¯• | 0.5h | â¬œ |
| T-5.3.4 | ğŸŸ¢ å®ç° Record `unsubscribe()` | 0.5h | â¬œ |

### Sprint 5.4: PB_CONNECT äº‹ä»¶

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-5.4.1 | ğŸ”´ ç¼–å†™ `PB_CONNECT` äº‹ä»¶æµ‹è¯• | 0.5h | â¬œ |
| T-5.4.2 | ğŸŸ¢ å®ç° `PB_CONNECT` äº‹ä»¶å¤„ç† | 0.5h | â¬œ |
| T-5.4.3 | ğŸ”´ ç¼–å†™ `is_connected` å±æ€§æµ‹è¯• | 0.5h | â¬œ |
| T-5.4.4 | ğŸŸ¢ å®ç° `is_connected` | 0.5h | â¬œ |
| T-5.4.5 | ğŸ”´ ç¼–å†™ `on_disconnect` é’©å­æµ‹è¯• | 0.5h | â¬œ |
| T-5.4.6 | ğŸŸ¢ å®ç° `on_disconnect` | 0.5h | â¬œ |

---

## Phase 6: å…¶ä»–æœåŠ¡ (P2)

> é¢„è®¡å·¥æ—¶: 28h
> ç›®æ ‡: å®Œæ•´æœåŠ¡è¦†ç›–

### Sprint 6.1: FileService

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-6.1.1 | ğŸ”´ ç¼–å†™ `get_url()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.1.2 | ğŸŸ¢ å®ç° `get_url()` | 0.5h | â¬œ |
| T-6.1.3 | ğŸ”´ ç¼–å†™ `get_token()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.1.4 | ğŸŸ¢ å®ç° `get_token()` | 0.5h | â¬œ |

### Sprint 6.2: SettingsService

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-6.2.1 | ğŸ”´ ç¼–å†™ `get_all()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.2.2 | ğŸŸ¢ å®ç° `get_all()` | 0.5h | â¬œ |
| T-6.2.3 | ğŸ”´ ç¼–å†™ `update()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.2.4 | ğŸŸ¢ å®ç° `update()` | 0.5h | â¬œ |
| T-6.2.5 | ğŸ”´ ç¼–å†™ `test_s3()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.2.6 | ğŸŸ¢ å®ç° `test_s3()` | 0.5h | â¬œ |
| T-6.2.7 | ğŸ”´ ç¼–å†™ `test_email()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.2.8 | ğŸŸ¢ å®ç° `test_email()` | 0.5h | â¬œ |
| T-6.2.9 | ğŸ”´ ç¼–å†™ `generate_apple_client_secret()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.2.10 | ğŸŸ¢ å®ç° `generate_apple_client_secret()` | 0.5h | â¬œ |

### Sprint 6.3: LogService

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-6.3.1 | ğŸ”´ ç¼–å†™ `get_list()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.3.2 | ğŸŸ¢ å®ç° `get_list()` | 0.5h | â¬œ |
| T-6.3.3 | ğŸ”´ ç¼–å†™ `get_one()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.3.4 | ğŸŸ¢ å®ç° `get_one()` | 0.5h | â¬œ |
| T-6.3.5 | ğŸ”´ ç¼–å†™ `get_stats()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.3.6 | ğŸŸ¢ å®ç° `get_stats()` | 0.5h | â¬œ |

### Sprint 6.4: HealthService

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-6.4.1 | ğŸ”´ ç¼–å†™ `check()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.4.2 | ğŸŸ¢ å®ç° `check()` | 0.5h | â¬œ |

### Sprint 6.5: BackupService

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-6.5.1 | ğŸ”´ ç¼–å†™ `get_full_list()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.5.2 | ğŸŸ¢ å®ç° `get_full_list()` | 0.5h | â¬œ |
| T-6.5.3 | ğŸ”´ ç¼–å†™ `create()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.5.4 | ğŸŸ¢ å®ç° `create()` | 0.5h | â¬œ |
| T-6.5.5 | ğŸ”´ ç¼–å†™ `upload()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.5.6 | ğŸŸ¢ å®ç° `upload()` | 0.5h | â¬œ |
| T-6.5.7 | ğŸ”´ ç¼–å†™ `delete()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.5.8 | ğŸŸ¢ å®ç° `delete()` | 0.5h | â¬œ |
| T-6.5.9 | ğŸ”´ ç¼–å†™ `restore()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.5.10 | ğŸŸ¢ å®ç° `restore()` | 0.5h | â¬œ |
| T-6.5.11 | ğŸ”´ ç¼–å†™ `get_download_url()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.5.12 | ğŸŸ¢ å®ç° `get_download_url()` | 0.5h | â¬œ |

### Sprint 6.6: CronService

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-6.6.1 | ğŸ”´ ç¼–å†™ `get_full_list()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.6.2 | ğŸŸ¢ å®ç° `get_full_list()` | 0.5h | â¬œ |
| T-6.6.3 | ğŸ”´ ç¼–å†™ `run()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.6.4 | ğŸŸ¢ å®ç° `run()` | 0.5h | â¬œ |

### Sprint 6.7: BatchService

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-6.7.1 | ğŸ”´ ç¼–å†™ `create_batch()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.7.2 | ğŸŸ¢ å®ç° `create_batch()` | 0.5h | â¬œ |
| T-6.7.3 | ğŸ”´ ç¼–å†™æ‰¹é‡æ“ä½œæµ‹è¯• (create/update/delete/upsert) | 1h | â¬œ |
| T-6.7.4 | ğŸŸ¢ å®ç°æ‰¹é‡æ“ä½œæ–¹æ³• | 1.5h | â¬œ |
| T-6.7.5 | ğŸ”´ ç¼–å†™ `send()` æµ‹è¯• | 0.5h | â¬œ |
| T-6.7.6 | ğŸŸ¢ å®ç° `send()` | 1h | â¬œ |

### Sprint 6.8: æ‰©å±•æœåŠ¡

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-6.8.1 | ğŸ”´ ç¼–å†™ `JobsService` æµ‹è¯• | 0.5h | â¬œ |
| T-6.8.2 | ğŸŸ¢ å®ç° `JobsService` | 0.5h | â¬œ |
| T-6.8.3 | ğŸ”´ ç¼–å†™ `SecretsService` æµ‹è¯• | 0.5h | â¬œ |
| T-6.8.4 | ğŸŸ¢ å®ç° `SecretsService` | 0.5h | â¬œ |
| T-6.8.5 | ğŸ”´ ç¼–å†™ `AnalyticsService` æµ‹è¯• | 0.5h | â¬œ |
| T-6.8.6 | ğŸŸ¢ å®ç° `AnalyticsService` | 0.5h | â¬œ |
| T-6.8.7 | ğŸ”´ ç¼–å†™ `TraceService` æµ‹è¯• | 0.5h | â¬œ |
| T-6.8.8 | ğŸŸ¢ å®ç° `TraceService` | 0.5h | â¬œ |

---

## Phase 7: å¼‚æ­¥å®¢æˆ·ç«¯ (P2)

> é¢„è®¡å·¥æ—¶: 12h
> ç›®æ ‡: AsyncPocketBase å®Œæ•´å®ç°

### Sprint 7.1: AsyncPocketBase

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-7.1.1 | ğŸ”´ ç¼–å†™ `AsyncPocketBase` åˆå§‹åŒ–æµ‹è¯• | 0.5h | â¬œ |
| T-7.1.2 | ğŸŸ¢ å®ç° `AsyncPocketBase` | 1h | â¬œ |
| T-7.1.3 | ğŸ”´ ç¼–å†™å¼‚æ­¥ `send()` æµ‹è¯• | 1h | â¬œ |
| T-7.1.4 | ğŸŸ¢ å®ç°å¼‚æ­¥ `send()` | 1.5h | â¬œ |

### Sprint 7.2: å¼‚æ­¥æœåŠ¡

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-7.2.1 | ğŸ”´ ç¼–å†™ `AsyncRecordService` æµ‹è¯• | 1h | â¬œ |
| T-7.2.2 | ğŸŸ¢ å®ç° `AsyncRecordService` | 1.5h | â¬œ |
| T-7.2.3 | ğŸ”´ ç¼–å†™å¼‚æ­¥è®¤è¯æµ‹è¯• | 1h | â¬œ |
| T-7.2.4 | ğŸŸ¢ å®ç°å¼‚æ­¥è®¤è¯æ–¹æ³• | 1.5h | â¬œ |
| T-7.2.5 | ğŸ”´ ç¼–å†™å¼‚æ­¥å®æ—¶è®¢é˜…æµ‹è¯• | 1h | â¬œ |
| T-7.2.6 | ğŸŸ¢ å®ç°å¼‚æ­¥å®æ—¶è®¢é˜… | 1.5h | â¬œ |

---

## Phase 8: å‘å¸ƒå‡†å¤‡ (P2)

> é¢„è®¡å·¥æ—¶: 8h
> ç›®æ ‡: æ–‡æ¡£å®Œå–„ã€PyPI å‘å¸ƒ

### Sprint 8.1: æ–‡æ¡£

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-8.1.1 | å®Œå–„ README.md (å®‰è£…ã€å¿«é€Ÿå¼€å§‹ã€ç¤ºä¾‹) | 2h | â¬œ |
| T-8.1.2 | ç¼–å†™ API æ–‡æ¡£ (docstring å®Œå–„) | 2h | â¬œ |
| T-8.1.3 | ç¼–å†™ CHANGELOG.md | 0.5h | â¬œ |
| T-8.1.4 | ç¼–å†™ CONTRIBUTING.md | 0.5h | â¬œ |

### Sprint 8.2: å‘å¸ƒ

| ä»»åŠ¡ | æè¿° | å·¥æ—¶ | çŠ¶æ€ |
|-----|------|------|------|
| T-8.2.1 | é…ç½® PyPI åŒ…å…ƒæ•°æ® | 0.5h | â¬œ |
| T-8.2.2 | æµ‹è¯•æœ¬åœ°æ„å»º (`poetry build`) | 0.5h | â¬œ |
| T-8.2.3 | å‘å¸ƒåˆ° TestPyPI éªŒè¯ | 0.5h | â¬œ |
| T-8.2.4 | å‘å¸ƒåˆ° PyPI | 0.5h | â¬œ |
| T-8.2.5 | éªŒè¯å®‰è£… (`pip install pocketbase`) | 0.5h | â¬œ |

---

## å·¥ä½œé‡æ±‡æ€»

| Phase | æè¿° | Tasks æ•°é‡ | é¢„ä¼°å·¥æ—¶ |
|-------|------|-----------|---------|
| Phase 1 | é¡¹ç›®åŸºç¡€è®¾æ–½ | 11 | 12h |
| Phase 2 | æ ¸å¿ƒåŸºç¡€æ¨¡å— | 36 | 28h |
| Phase 3 | CRUD æœåŠ¡å±‚ | 32 | 24h |
| Phase 4 | è®¤è¯æ¨¡å— | 36 | 28h |
| Phase 5 | å®æ—¶è®¢é˜… | 24 | 20h |
| Phase 6 | å…¶ä»–æœåŠ¡ | 48 | 28h |
| Phase 7 | å¼‚æ­¥å®¢æˆ·ç«¯ | 12 | 12h |
| Phase 8 | å‘å¸ƒå‡†å¤‡ | 9 | 8h |
| **æ€»è®¡** | | **208** | **~160h** |

---

## æ‰§è¡Œé¡ºåº

```
Phase 1 (åŸºç¡€è®¾æ–½)
    â†“
Phase 2 (æ ¸å¿ƒæ¨¡å—)
    â†“
Phase 3 (CRUD)
    â†“
Phase 4 (è®¤è¯) â†â”€â”€â”
    â†“             â”‚
Phase 5 (å®æ—¶) â”€â”€â”€â”˜ (ä¾èµ– OAuth2)
    â†“
Phase 6 (å…¶ä»–æœåŠ¡)
    â†“
Phase 7 (å¼‚æ­¥)
    â†“
Phase 8 (å‘å¸ƒ)
```

---

## è´¨é‡é—¨ç¦

æ¯ä¸ª Sprint å®Œæˆåå¿…é¡»æ»¡è¶³:

- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ (`pytest`)
- [ ] è¦†ç›–ç‡ >= 95% (`pytest-cov`)
- [ ] ç±»å‹æ£€æŸ¥é€šè¿‡ (`mypy --strict`)
- [ ] Lint æ£€æŸ¥é€šè¿‡ (`ruff check`)
- [ ] æ ¼å¼æ£€æŸ¥é€šè¿‡ (`ruff format --check`)
