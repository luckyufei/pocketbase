# 功能对齐提示词模板

> 本模板用于指导 WebUI (React) 与 UI (Svelte) 版本的功能对齐工作

---

## 🎯 Phase 0: 初始化对齐任务

### Prompt 0.1: 创建对齐规范文档结构

```
请帮我创建一个功能对齐的规范文档结构，用于对比 [目标模块名称] 的两个实现版本：

1. **UI (Svelte) 版本**: `[Svelte 组件路径]`
2. **WebUI (React) 版本**: `[React 组件路径]`

请创建以下文件结构：
- `specs/[spec-number]-[spec-name]/spec.md` - 功能对比规范
- `specs/[spec-number]-[spec-name]/tasks.md` - 任务清单
- `specs/[spec-number]-[spec-name]/plan.md` - 实施计划

spec.md 应包含以下章节：
1. 概述 (目标、范围、方法论)
2. 功能对比矩阵
3. 差异分析
4. 总结

tasks.md 应包含：
1. 按优先级排序的任务列表
2. 每个任务的验收标准
3. 预估工时
4. 依赖关系
```

---

## 🔍 Phase 1: 功能清单对比

### Prompt 1.1: 组件结构对比

```
请对比以下两个目录的组件结构：

1. **UI (Svelte) 版本**: `[Svelte 目录路径]`
2. **WebUI (React) 版本**: `[React 目录路径]`

需要分析：

## 1. 文件结构对比
- 列出两个目录下的所有组件文件
- 标注哪些组件在两边都有对应
- 标注哪些组件只存在于一方

## 2. 功能映射
- 建立 Svelte 组件到 React 组件的对应关系
- 标注功能等效但命名不同的组件
- 标注功能合并或拆分的情况

## 3. 输出格式

| UI (Svelte) 组件 | WebUI (React) 组件 | 状态 | 备注 |
|-----------------|-------------------|------|------|
| ComponentA.svelte | ComponentA.tsx | ✅ 对应 | |
| ComponentB.svelte | - | ❌ 缺失 | 需要新增 |
| - | ComponentC.tsx | ➕ 新增 | WebUI 独有 |
```

### Prompt 1.2: Tab/页签结构对比

```
请对比 [模块名称] 的 Tab 结构：

1. **UI (Svelte) 版本**: 搜索 `[Svelte 组件路径]` 中的 Tab 定义
2. **WebUI (React) 版本**: 搜索 `[React 组件路径]` 中的 Tab 定义

需要找出：

## 1. Tab 列表
- 两个版本各有哪些 Tab
- Tab 的显示名称
- Tab 的显示条件（如只在特定类型下显示）
- Tab 的顺序

## 2. Tab 内容
- 每个 Tab 对应的组件
- Tab 切换的实现方式
- 是否有动画效果

## 3. 输出格式

| Tab 名称 | UI (Svelte) | WebUI (React) | 状态 |
|---------|:-----------:|:-------------:|:----:|
| Fields | ✅ | ✅ | ✅ 一致 |
| Query | ✅ (View only) | ❌ | 🔴 缺失 |
```

### Prompt 1.3: 字段类型对比

```
请对比 [模块名称] 支持的字段/选项类型：

1. **UI (Svelte) 版本**: 搜索 `[Svelte 路径]` 中的字段类型定义
2. **WebUI (React) 版本**: 搜索 `[React 路径]` 中的字段类型定义

需要找出：

## 1. 字段类型列表
- 搜索关键词：`type`, `fieldType`, `switch`, `case`
- 列出所有支持的字段类型
- 每种类型对应的选项组件
- 每种类型的图标

## 2. 字段选项
- 每种字段类型的配置项
- 必填/选填设置
- 默认值设置
- 校验规则

## 3. 输出格式

| 字段类型 | UI (Svelte) | WebUI (React) | 选项差异 |
|---------|:-----------:|:-------------:|---------|
| text | ✅ | ✅ | - |
| secret | ✅ | ❌ | 缺失 Secret 类型 |
```

---

## 🎨 Phase 2: UI/UX 细节对比

### Prompt 2.1: 表单验证对比

```
请对比 [模块名称] 的表单验证系统：

1. **UI (Svelte) 版本**: `[Svelte 组件路径]`
2. **WebUI (React) 版本**: `[React 组件路径]`

需要找出：

## 1. 验证触发时机
- 搜索关键词：`validate`, `onBlur`, `onChange`, `onSubmit`, `errors`
- 检查：
  - 是否支持实时验证（输入时）
  - 是否支持失焦验证（blur）
  - 是否支持提交时验证

## 2. 错误显示方式
- 搜索关键词：`error`, `invalid`, `message`, `hint`
- 检查：
  - 错误消息的位置（字段下方/Tooltip/Alert）
  - 错误状态的视觉反馈（边框颜色/图标）
  - 多个错误的显示方式

## 3. 验证规则
- 必填字段验证
- 格式验证（正则）
- 唯一性验证
- 关联验证（字段间依赖）

## 4. 输出格式

| 功能 | UI (Svelte) | WebUI (React) | 状态 |
|------|:-----------:|:-------------:|:----:|
| 实时验证 | ✅ | ❌ | 🔴 缺失 |
| 错误 Tooltip | ✅ | ❌ | 🔴 缺失 |
```

### Prompt 2.2: 确认弹窗和危险操作对比

```
请对比 [模块名称] 的确认弹窗和危险操作：

1. **UI (Svelte) 版本**: `[Svelte 组件路径]`
2. **WebUI (React) 版本**: `[React 组件路径]`

需要找出：

## 1. 确认弹窗场景
- 搜索关键词：`confirm`, `dialog`, `modal`, `alert`, `warning`
- 检查：
  - 删除操作确认
  - 更新操作确认（显示变更详情）
  - 危险操作确认

## 2. 弹窗内容
- 标题文案
- 详细说明
- 变更详情列表
- 按钮文案和颜色

## 3. 危险操作样式
- 搜索关键词：`danger`, `destructive`, `warning`, `red`
- 删除按钮颜色
- 警告图标

## 4. 输出格式

| 场景 | UI (Svelte) | WebUI (React) | 状态 |
|------|:-----------:|:-------------:|:----:|
| 删除确认 | ✅ 红色按钮 | ✅ destructive | ✅ 一致 |
| 变更详情 | ✅ 列表显示 | ❌ 仅数量 | 🔴 缺失 |
```

### Prompt 2.3: 键盘快捷键对比

```
请对比 [模块名称] 的键盘快捷键：

1. **UI (Svelte) 版本**: `[Svelte 组件路径]`
2. **WebUI (React) 版本**: `[React 组件路径]`

需要找出：

## 1. 快捷键定义
- 搜索关键词：`keydown`, `keyup`, `Escape`, `Enter`, `hotkey`, `shortcut`, `Ctrl`, `Meta`
- 检查：
  - ESC 关闭面板/弹窗
  - Enter 确认/提交
  - Ctrl/Cmd + S 保存
  - Ctrl/Cmd + N 新建

## 2. 快捷键实现
- 全局监听还是局部监听
- 是否阻止默认行为
- 是否有冲突处理

## 3. 输出格式

| 快捷键 | 功能 | UI (Svelte) | WebUI (React) | 状态 |
|--------|------|:-----------:|:-------------:|:----:|
| ESC | 关闭面板 | ✅ | ❌ | 🔴 缺失 |
| Ctrl+S | 保存 | ✅ | ❌ | 🔴 缺失 |
```

### Prompt 2.4: 加载状态和动画对比

```
请对比 [模块名称] 的加载状态和动画：

1. **UI (Svelte) 版本**: `[Svelte 组件路径]`
2. **WebUI (React) 版本**: `[React 组件路径]`

需要找出：

## 1. 加载状态
- 搜索关键词：`loading`, `isLoading`, `isSaving`, `spinner`, `loader`, `pending`
- 检查：
  - 保存按钮的加载状态
  - 删除按钮的加载状态
  - 面板打开时的加载状态
  - API 请求中的加载指示器

## 2. 禁用状态
- 搜索关键词：`disabled`, `isDisabled`, `btn-disabled`, `pointer-events-none`
- 检查：
  - 保存中禁用表单
  - 必填字段未填时禁用保存
  - 系统字段禁用编辑

## 3. 过渡动画
- 搜索关键词：`transition`, `animate`, `fade`, `slide`, `duration`, `ease`
- 检查：
  - 面板打开/关闭动画
  - 字段展开/折叠动画
  - 删除确认的淡入淡出

## 4. 输出格式

| 功能 | UI (Svelte) | WebUI (React) | 状态 |
|------|:-----------:|:-------------:|:----:|
| 面板滑入动画 | ✅ fly transition | ❌ | 🔴 缺失 |
| 保存按钮旋转 | ✅ btn-loading | ⚠️ 仅文本 | 🟡 效果弱 |
```

### Prompt 2.5: 空状态 UI 对比

```
请对比 [模块名称] 的空状态 UI：

1. **UI (Svelte) 版本**: `[Svelte 组件路径]`
2. **WebUI (React) 版本**: `[React 组件路径]`

需要找出：

## 1. 空状态场景
- 搜索关键词：`empty`, `no data`, `placeholder`, `emptyState`, `isEmpty`
- 检查：
  - 列表为空时的提示
  - 搜索无结果时的提示
  - 未配置时的引导

## 2. 空状态内容
- 提示文案
- 引导按钮
- 插图/图标

## 3. 输出格式

| 场景 | UI (Svelte) | WebUI (React) | 状态 |
|------|:-----------:|:-------------:|:----:|
| 列表为空 | "No items" | "暂无数据" | ⚠️ 语言不一致 |
```

### Prompt 2.6: 长文本和 Tooltip 对比

```
请对比 [模块名称] 的长文本处理和 Tooltip：

1. **UI (Svelte) 版本**: `[Svelte 组件路径]`
2. **WebUI (React) 版本**: `[React 组件路径]`

需要找出：

## 1. 文本截断
- 搜索关键词：`truncate`, `ellipsis`, `overflow`, `text-overflow`, `whitespace-nowrap`
- 检查：
  - 名称过长时的截断
  - 截断后是否有 Tooltip 显示完整内容

## 2. Tooltip 使用
- 搜索关键词：`tooltip`, `title`, `Tooltip`, `popover`, `hover`
- 检查：
  - 图标的功能说明
  - 错误信息的详细提示
  - 截断文本的完整内容

## 3. 输出格式

| 功能 | UI (Svelte) | WebUI (React) | 状态 |
|------|:-----------:|:-------------:|:----:|
| 名称截断 Tooltip | ✅ title 属性 | ❌ | 🔴 缺失 |
```

---

## 🔧 Phase 3: 特定功能深度对比

### Prompt 3.1: 代码编辑器对比

```
请对比 [模块名称] 的代码编辑器实现：

1. **UI (Svelte) 版本**: `[Svelte 组件路径]`
2. **WebUI (React) 版本**: `[React 组件路径]`

需要找出：

## 1. 编辑器类型
- 搜索关键词：`CodeEditor`, `CodeMirror`, `Monaco`, `ace`, `textarea`
- 检查使用的编辑器库

## 2. 语言支持
- 搜索关键词：`mode`, `language`, `syntax`, `highlight`
- 检查：
  - 支持的语言类型
  - 语法高亮规则
  - 自定义语法支持

## 3. 自动补全
- 搜索关键词：`autocomplete`, `completion`, `hint`, `suggest`
- 检查：
  - 字段名自动补全
  - 函数名自动补全
  - 关键字自动补全

## 4. 输出格式

| 功能 | UI (Svelte) | WebUI (React) | 状态 |
|------|:-----------:|:-------------:|:----:|
| SQL 语法高亮 | ✅ 自定义模式 | ⚠️ 基础 | 🟡 差异 |
| 字段自动补全 | ✅ | ❌ | 🔴 缺失 |
```

### Prompt 3.2: OAuth2 配置对比

```
请对比 [模块名称] 的 OAuth2 配置：

1. **UI (Svelte) 版本**: `[Svelte 组件路径]`
2. **WebUI (React) 版本**: `[React 组件路径]`

需要找出：

## 1. 提供商列表
- 搜索关键词：`provider`, `oauth`, `google`, `github`, `apple`
- 检查：
  - 支持的 OAuth2 提供商数量
  - 提供商的显示顺序
  - 提供商的 Logo 图片

## 2. 配置选项
- 搜索关键词：`clientId`, `clientSecret`, `authUrl`, `tokenUrl`
- 检查：
  - 通用配置项
  - 提供商特有配置项
  - OIDC 配置项

## 3. 字段映射
- 搜索关键词：`mapping`, `fullname`, `avatar`, `username`
- 检查：
  - 用户信息字段映射配置
  - 自定义映射规则

## 4. 输出格式

| 功能 | UI (Svelte) | WebUI (React) | 状态 |
|------|:-----------:|:-------------:|:----:|
| 提供商数量 | 35+ | 28 | 🟡 部分缺失 |
| 字段映射 | ✅ | ❌ | 🔴 缺失 |
```

---

## 📝 Phase 4: 生成任务清单

### Prompt 4.1: 汇总差异并生成任务

```
基于以上所有对比结果，请生成任务清单：

## 1. 任务分类

按优先级分类：
- 🔴 **Critical**: 影响核心功能，必须修复
- 🔴 **High**: 用户体验严重受损，强烈建议修复
- 🟡 **Medium**: 功能可用但体验不一致，建议修复
- 🟢 **Low**: 细节差异，可选修复

## 2. 任务格式

每个任务应包含：
```
### Phase [X.Y]: [功能名称] (Priority: P[0-3])

**Purpose**: [简要说明目的]

---

- [ ] T[编号] [难度] [任务描述]
  ```[语言]
  // 代码示例（如适用）
  ```

**Checkpoint**: [验收标准] ✅
```

## 3. 依赖关系

标注任务之间的依赖关系：
- 前置任务
- 可并行任务
- 阻塞任务

## 4. 工时估算

| Phase | Tasks | Est. Hours | Parallelizable |
|-------|-------|------------|----------------|
| Phase X.Y | N | Xh | Yes/No |
```

### Prompt 4.2: 生成验证清单

```
请生成功能对齐的验证清单：

## 1. 按功能分组

### [功能组名称] (Priority)

- [ ] [验证项 1]
- [ ] [验证项 2]
- [ ] ...

## 2. 验证内容

### 功能验证
- [ ] 核心功能正常工作
- [ ] 边界情况处理正确
- [ ] 错误情况有适当提示

### 交互验证
- [ ] 键盘快捷键生效
- [ ] 动画效果流畅
- [ ] 加载状态正确显示

### 视觉验证
- [ ] 颜色符合设计规范
- [ ] 布局响应式正常
- [ ] 空状态显示正确

### 测试验证
- [ ] 单元测试通过
- [ ] 无 TypeScript 错误
- [ ] 无 Lint 警告
```

---

## 📊 Phase 5: 执行对齐任务

### Prompt 5.1: 执行单个任务

```
请执行任务 T[编号]: [任务描述]

## 任务信息

- **所在 Phase**: Phase [X.Y]
- **优先级**: P[0-3]
- **预估时间**: [X]h
- **依赖任务**: [前置任务编号，如无则填"无"]

## 参考实现

UI (Svelte) 版本的实现位于：`[文件路径]`

关键代码：
```[语言]
// UI 版本的关键实现代码
```

## 要求

1. 在 WebUI (React) 版本中实现等效功能
2. 保持代码风格一致
3. 添加必要的类型定义
4. 遵循项目设计规范（Apple-style 黑白灰 + 蓝色点缀）

## 验收标准

- [ ] [验收项 1]
- [ ] [验收项 2]
```

### Prompt 5.2: 批量执行任务

```
请批量执行以下任务：

## 任务列表

- T[编号1]: [描述]
- T[编号2]: [描述]
- T[编号3]: [描述]

## 注意事项

1. 这些任务可以并行执行（无依赖关系）
2. 请在实现后更新 tasks.md 标记完成状态
3. 如遇到问题请暂停并报告

## 完成后

更新 Checkpoint 状态并生成变更摘要。
```

---

## 🔄 Phase 6: 迭代和维护

### Prompt 6.1: 检查遗漏

```
请检查 [模块名称] 是否还有遗漏的功能差异：

## 检查范围

1. **UI (Svelte) 版本**: `[目录路径]`
2. **WebUI (React) 版本**: `[目录路径]`

## 检查项

- [ ] 所有 UI 版本的组件都有对应的 React 实现
- [ ] 所有配置选项都已实现
- [ ] 所有交互细节都已对齐
- [ ] 所有错误处理都已覆盖

## 如发现新差异

1. 更新 spec.md 添加差异描述
2. 更新 tasks.md 添加新任务
3. 评估优先级和工时
```

### Prompt 6.2: 完成报告

```
请生成 [模块名称] 功能对齐的完成报告：

## 报告内容

### 1. 执行摘要

- 对齐范围
- 开始日期 / 完成日期
- 总任务数 / 完成任务数
- 总工时

### 2. 已完成任务

| Phase | 描述 | 状态 |
|-------|------|------|
| Phase X.Y | ... | ✅ |

### 3. 未完成/延期任务

| Phase | 描述 | 原因 | 计划完成日期 |
|-------|------|------|-------------|
| Phase X.Y | ... | ... | YYYY-MM-DD |

### 4. 已知问题

- [问题描述及临时解决方案]

### 5. 建议后续工作

- [建议的优化或改进]
```

---

## 📋 快速参考：搜索关键词清单

### 组件结构
- `export`, `function`, `const`, `component`

### Tab/导航
- `Tab`, `Tabs`, `nav`, `panel`, `view`

### 表单验证
- `validate`, `error`, `invalid`, `required`, `rules`

### 确认弹窗
- `confirm`, `dialog`, `modal`, `alert`, `warning`

### 键盘操作
- `keydown`, `keyup`, `Escape`, `Enter`, `hotkey`

### 加载状态
- `loading`, `saving`, `pending`, `spinner`

### 动画
- `transition`, `animate`, `fade`, `slide`

### 空状态
- `empty`, `placeholder`, `no data`, `isEmpty`

### 长文本
- `truncate`, `ellipsis`, `overflow`, `tooltip`

### 代码编辑器
- `CodeEditor`, `CodeMirror`, `autocomplete`

### OAuth2
- `provider`, `oauth`, `clientId`, `mapping`

---

## 📁 文档模板

### spec.md 模板

```markdown
# [功能名称] 对齐规范

## 概述

### 目标
[对齐目标描述]

### 范围
- UI (Svelte): `[路径]`
- WebUI (React): `[路径]`

### 方法论
1. 组件结构对比
2. UI/UX 细节对比
3. 差异分析
4. 任务生成

---

## 功能对比矩阵

| 功能 | UI (Svelte) | WebUI (React) | 状态 |
|------|:-----------:|:-------------:|:----:|
| ... | ✅ | ✅ | ✅ 一致 |
| ... | ✅ | ❌ | 🔴 缺失 |

---

## 差异分析

### 🔴 [差异类别] (Priority)

| 功能 | UI (Svelte) | WebUI (React) | 状态 |
|------|:-----------:|:-------------:|:----:|
| ... | ... | ... | ... |

---

## 总结

| 类别 | 数量 | 说明 |
|------|------|------|
| ✅ 完全对齐 | X% | ... |
| 🔴 需修复 | N项 | ... |
```

### tasks.md 模板

```markdown
# [功能名称] 对齐任务清单

## 任务状态图例

- 🟢 简单 (< 30min)
- 🟡 中等 (30min - 2h)
- 🔴 复杂 (> 2h)

---

## Phase 0: 关键架构对齐

### 0.1 [功能名称] (Priority: P0)

**Purpose**: [目的描述]

---

- [ ] T000a 🟢 [任务描述]
- [ ] T000b 🟡 [任务描述]

**Checkpoint**: [验收标准] ✅

---

## Estimated Effort

| Phase | Tasks | Est. Hours | Parallelizable |
|-------|-------|------------|----------------|
| ... | ... | ... | ... |

---

## Verification Checklist

### [功能验证]

- [ ] [验证项]
```

---

## 💡 使用建议

1. **按顺序执行**: 从 Phase 0 开始，确保规范文档完整
2. **并行任务**: 同一 Phase 内的任务通常可以并行
3. **及时更新**: 每完成一个任务立即更新状态
4. **定期检查**: 完成一个 Phase 后运行检查遗漏的 Prompt
5. **保持一致**: 遵循项目的设计规范和代码风格
